# ğŸ¯ EvolvAI çŸ­æœŸè¡ŒåŠ¨è®¡åˆ’ (2å‘¨å†²åˆº)

**ç›®æ ‡**: å®ŒæˆEpic-001 Phase 2æ ¸å¿ƒåŠŸèƒ½ + Dogfoodingå‡†å¤‡
**æ—¶é—´**: 7-10äººå¤©ï¼ˆçº¦2å‘¨å…¨èŒ or 4å‘¨å…¼èŒ50%ï¼‰
**å¼€å§‹æ—¥æœŸ**: 2025-11-07
**ç›®æ ‡æ—¥æœŸ**: 2025-11-21

---

## ğŸ“Š è¿›åº¦æ€»è§ˆ

```
Week 1-2: Feature 2.2 Patch-Firsté‡æ„ + MCPé›†æˆ
â”œâ”€ [ ] Phase 1: BDDåœºæ™¯å’Œåˆ é™¤å‡†å¤‡ (1å¤©)
â”œâ”€ [ ] Phase 2: propose_editå®ç° (1.5å¤©)
â”œâ”€ [ ] Phase 3: apply_editå®ç° (2å¤©)
â”œâ”€ [ ] Phase 4: ExecutionPlané›†æˆ (0.5å¤©)
â””â”€ [ ] Phase 5: MCPé›†æˆå’Œæµ‹è¯• (1å¤©)

Week 2-3: safe_search/exec MCPé›†æˆ + åŸºå‡†æµ‹è¯•
â”œâ”€ [ ] Phase 6: safe_search/exec MCP (1å¤©)
â”œâ”€ [ ] Phase 7: åŸºå‡†æµ‹è¯•æ¡†æ¶ (2å¤©)
â”œâ”€ [ ] Phase 8: å®æˆ˜dogfooding (2å¤©)
â””â”€ [ ] Phase 9: æ–‡æ¡£å’Œæ€»ç»“ (1å¤©)
```

**å½“å‰çŠ¶æ€**: ğŸŸ¢ Ready to Start
**å…³é”®å†³ç­–**: âœ… é€‰æ‹©æ–¹æ¡ˆAï¼ˆPatch-Firsté‡æ„ï¼‰
**é¢„è®¡å®Œæˆ**: 2025-11-21 (12-14äººå¤©)

---

## ğŸš¨ é‡å¤§å˜æ›´è¯´æ˜

**å†³ç­–æ—¥æœŸ**: 2025-11-07
**å†³ç­–å†…å®¹**: Feature 2.2é‡‡ç”¨æ–¹æ¡ˆAï¼ˆé‡æ–°å®ç°Patch-Firstæ¶æ„ï¼‰

**å˜æ›´åŸå› **:
1. æ—§å®ç°æ¶æ„æ–¹å‘é”™è¯¯ï¼ˆç›´æ¥ç¼–è¾‘ vs Patch-Firstï¼‰
2. äº§å“å®šä¹‰ã€å®ç°ã€æµ‹è¯•ä¸‰æ–¹å®Œå…¨è„±èŠ‚
3. ä¿®å¤bugæ— æ³•è§£å†³æ ¹æœ¬é—®é¢˜ï¼Œåªä¼šç§¯ç´¯æŠ€æœ¯å€º
4. AIæ—¶ä»£ï¼Œç”Ÿäº§ä»£ç å®¹æ˜“ï¼Œç†è§£éœ€æ±‚å’Œåˆ é™¤è¿‡åº¦è®¾è®¡æ›´é‡è¦

**å½±å“**:
- åŸè®¡åˆ’3å¤©ä¿®å¤ â†’ æ”¹ä¸º6å¤©é‡æ–°å®ç°
- æ—§ä»£ç åŸºæœ¬ä½œåºŸï¼ˆ~920è¡Œï¼‰
- æ–°ä»£ç æ›´ç®€æ´ï¼ˆ~550è¡Œï¼Œ-29%ï¼‰
- ä½†çœŸæ­£ç¬¦åˆäº§å“å®šä¹‰å’Œç”¨æˆ·éœ€æ±‚

**ç›¸å…³æ–‡æ¡£**:
- [Critical Analysis](docs/knowledge/critical-analysis-feature-2.2.md)
- [BDD Scenarios](docs/development/sprints/current/story-2.2-bdd-scenarios.md)
- [Deletion Checklist](DELETION_CHECKLIST.md)

---

## ğŸ”§ Phase 1: ä¿®å¤Feature 2.2 (3äººå¤©)

### ä»»åŠ¡1.1: åˆ†æå¤±è´¥åŸå›  (4å°æ—¶)
- [ ] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œè®°å½•æ‰€æœ‰å¤±è´¥
- [ ] åˆ†ç±»å¤±è´¥ç±»å‹ï¼ˆæ¥å£/mock/å‚æ•°/ç¼ºå¤±æ–¹æ³•ï¼‰
- [ ] å¯¹ç…§`feature-2.2-tdd-lessons-learned`è®°å¿†æ–‡æ¡£
- [ ] åˆ›å»ºä¿®å¤ä¼˜å…ˆçº§åˆ—è¡¨

**äº¤ä»˜ç‰©**: `docs/development/sprints/current/feature-2.2-fix-analysis.md`

---

### ä»»åŠ¡1.2: ä¿®å¤æ¥å£ä¸åŒ¹é… (1äººå¤©)
- [ ] åŒæ­¥æµ‹è¯•mockæ–¹æ³•åä¸å®é™…å®ç°
  - [ ] `_validate_edit` â†’ `_execute_validation_chain`
  - [ ] ç»Ÿä¸€å‚æ•°é¡ºåº
- [ ] å®ç°ç¼ºå¤±çš„`safe_edit_mcp()`æ–¹æ³•
- [ ] ä¿®æ­£è¿”å›å€¼ç»“æ„ï¼ˆbatchæ“ä½œæœŸæœ›vså®é™…ï¼‰
- [ ] è¿è¡Œæµ‹è¯•éªŒè¯ä¿®å¤

**éªŒæ”¶æ ‡å‡†**:
- æ¥å£ä¸åŒ¹é…æµ‹è¯• 100% é€šè¿‡
- æ–°å¢æµ‹è¯•è¦†ç›–`safe_edit_mcp()`

---

### ä»»åŠ¡1.3: åº”ç”¨KISSåŸåˆ™é‡æ„ (1äººå¤©)
- [ ] ç®€åŒ–mockå¤æ‚åº¦ï¼ˆå‚è€ƒFeature 2.1ï¼‰
  - [ ] å‡å°‘nested patch
  - [ ] ä½¿ç”¨è¡Œä¸ºéªŒè¯æ›¿ä»£å®ç°ç»†èŠ‚éªŒè¯
- [ ] åˆ é™¤over-engineeringçš„æµ‹è¯•
  - [ ] æ£€æŸ¥æ¯ä¸ªæµ‹è¯•æ˜¯å¦æœ‰DoDæ˜ å°„
  - [ ] åˆ é™¤æ— DoDæ˜ å°„çš„æµ‹è¯•
- [ ] ä¼˜åŒ–æµ‹è¯•ä»£ç ç»“æ„
  - [ ] å‡å°‘é‡å¤çš„setupä»£ç 
  - [ ] æå–å…¬å…±æµ‹è¯•åŠ©æ‰‹

**éªŒæ”¶æ ‡å‡†**:
- Mockå¤æ‚åº¦ â‰¤ 3/10
- æµ‹è¯•é€šè¿‡ç‡ â‰¥ 95%
- æ‰€æœ‰æµ‹è¯•æœ‰Story/Scenario/DoDæ³¨é‡Š

---

### ä»»åŠ¡1.4: å›å½’æµ‹è¯•å’Œè´¨é‡æ£€æŸ¥ (4å°æ—¶)
- [ ] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- [ ] è¿è¡Œ`uv run poe format`
- [ ] è¿è¡Œ`uv run poe type-check`
- [ ] è¿è¡Œ`uv run poe lint`
- [ ] ä¿®å¤æ‰€æœ‰è´¨é‡é—®é¢˜

**éªŒæ”¶æ ‡å‡†**:
- test_safe_edit_wrapper.py: â‰¥ 95% é€šè¿‡
- format/type-check/lint: å…¨éƒ¨é€šè¿‡
- æ— æ–°å¢æŠ€æœ¯å€º

---

## ğŸ”Œ Phase 2: MCPå·¥å…·é›†æˆ (2äººå¤©)

### ä»»åŠ¡2.1: åˆ›å»ºsafe_tools.pyæ¨¡å— (4å°æ—¶)
- [ ] åœ¨`src/serena/tools/`åˆ›å»º`safe_tools.py`
- [ ] å®šä¹‰SafeSearchToolç±»ï¼ˆç»§æ‰¿Toolï¼‰
- [ ] å®šä¹‰SafeEditToolç±»ï¼ˆç»§æ‰¿Toolï¼‰
- [ ] å®šä¹‰SafeExecToolç±»ï¼ˆç»§æ‰¿Toolï¼‰
- [ ] å®ç°apply()æ–¹æ³•æ¡¥æ¥åˆ°wrapper

**ä»£ç ç»“æ„**:
```python
# src/serena/tools/safe_tools.py
from serena.tools.tools_base import Tool

class SafeSearchTool(Tool):
    def apply(self, query: str, area_selector: str = "auto",
              mode: str = "balanced", **kwargs) -> str:
        """Safe search with area detection"""
        wrapper = SafeSearchWrapper(self.agent, self.agent.active_project)
        result = wrapper.safe_search(query, area_selector, mode, **kwargs)
        return json.dumps(result, indent=2)
```

---

### ä»»åŠ¡2.2: æ³¨å†Œå·¥å…·åˆ°ä¸Šä¸‹æ–‡ (2å°æ—¶)
- [ ] ç¼–è¾‘`src/serena/config/contexts/desktop-app.yml`
- [ ] æ·»åŠ safe_search/safe_edit/safe_execåˆ°toolsåˆ—è¡¨
- [ ] ç¼–è¾‘`src/serena/tools/__init__.py`å¯¼å‡ºæ–°å·¥å…·
- [ ] æµ‹è¯•å·¥å…·æ³¨å†ŒæˆåŠŸ

**éªŒè¯å‘½ä»¤**:
```bash
uv run serena-mcp-server --project . &
# æŸ¥çœ‹MCPæš´éœ²çš„å·¥å…·åˆ—è¡¨
```

---

### ä»»åŠ¡2.3: ç¼–å†™MCPé›†æˆæµ‹è¯• (1äººå¤©)
- [ ] åˆ›å»º`test/serena/test_safe_tools_mcp.py`
- [ ] æµ‹è¯•safe_searché€šè¿‡MCPè°ƒç”¨
- [ ] æµ‹è¯•safe_edité€šè¿‡MCPè°ƒç”¨
- [ ] æµ‹è¯•safe_execé€šè¿‡MCPè°ƒç”¨
- [ ] æµ‹è¯•é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ

**æµ‹è¯•åœºæ™¯**:
```python
def test_safe_search_mcp_integration(serena_agent):
    result = serena_agent.apply_tool(
        "safe_search",
        query="ToolExecutionEngine",
        area_selector="auto"
    )
    assert "detected_areas" in result
    assert "total_results" in result
```

---

## ğŸ“Š Phase 3: åŸºå‡†æµ‹è¯•æ¡†æ¶ (2äººå¤©)

### ä»»åŠ¡3.1: è®¾è®¡TPSTæµ‹é‡ç³»ç»Ÿ (4å°æ—¶)
- [ ] å®šä¹‰TPSTæµ‹é‡æŒ‡æ ‡
  - [ ] Input tokens (query + context)
  - [ ] Output tokens (results)
  - [ ] Time (execution duration)
  - [ ] Success rate (correct results)
- [ ] è®¾è®¡å¯¹æ¯”æµ‹è¯•æ¡†æ¶
  - [ ] Baseline: åŸç”Ÿsearch/edit/exec
  - [ ] Treatment: safe_search/safe_edit/safe_exec
- [ ] åˆ›å»ºæµ‹è¯•ç”¨ä¾‹åº“ï¼ˆ10ä¸ªå…¸å‹åœºæ™¯ï¼‰

**äº¤ä»˜ç‰©**: `docs/testing/benchmarks/tpst-measurement-design.md`

---

### ä»»åŠ¡3.2: å®ç°åŸºå‡†æµ‹è¯•å¥—ä»¶ (1äººå¤©)
- [ ] åˆ›å»º`test/benchmarks/test_tpst_comparison.py`
- [ ] å®ç°tokenè®¡æ•°å™¨ï¼ˆä½¿ç”¨tiktokenï¼‰
- [ ] å®ç°æ—¶é—´æµ‹é‡å’Œç»Ÿè®¡
- [ ] å®ç°ç»“æœå¯¹æ¯”éªŒè¯
- [ ] ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼ˆJSON + Markdownï¼‰

**æµ‹è¯•åœºæ™¯ç¤ºä¾‹**:
```python
scenarios = [
    "æœç´¢Pythonå‡½æ•°å®šä¹‰",
    "ä¿®æ”¹Goæ–‡ä»¶çš„å‡½æ•°ç­¾å",
    "æ‰§è¡ŒTypeScriptæµ‹è¯•",
    "è·¨ç›®å½•æœç´¢ç±»å¼•ç”¨",
    # ... 10ä¸ªåœºæ™¯
]
```

---

### ä»»åŠ¡3.3: è¿è¡ŒåŸºå‡†æµ‹è¯•å¹¶åˆ†æ (4å°æ—¶)
- [ ] åœ¨å½“å‰é¡¹ç›®è¿è¡Œå®Œæ•´åŸºå‡†æµ‹è¯•
- [ ] æ”¶é›†TPSTæ•°æ®ï¼ˆbaseline vs safe toolsï¼‰
- [ ] è®¡ç®—æ”¹è¿›ç™¾åˆ†æ¯”
- [ ] åˆ†æç“¶é¢ˆå’Œä¼˜åŒ–ç©ºé—´
- [ ] ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š

**éªŒæ”¶æ ‡å‡†**:
- è‡³å°‘10ä¸ªæµ‹è¯•åœºæ™¯
- æ¯ä¸ªåœºæ™¯ â‰¥ 5æ¬¡é‡å¤
- TPSTæ”¹è¿›ç›®æ ‡: â‰¥ 30%

**äº¤ä»˜ç‰©**: `docs/testing/benchmarks/tpst-baseline-report-2025-11.md`

---

## ğŸ• Phase 4: å®æˆ˜Dogfooding (2äººå¤©)

### ä»»åŠ¡4.1: ä½¿ç”¨safe_searchå¼€å‘æ–°åŠŸèƒ½ (1äººå¤©)
- [ ] é€‰æ‹©ä¸€ä¸ªå°å‹æ–°åŠŸèƒ½ï¼ˆå¦‚Lesson Guard Story 5.1ï¼‰
- [ ] å…¨ç¨‹ä½¿ç”¨safe_searchæŸ¥æ‰¾ä»£ç 
- [ ] è®°å½•æ¯æ¬¡æœç´¢çš„ï¼š
  - [ ] æŸ¥è¯¢å†…å®¹
  - [ ] åŒºåŸŸæ£€æµ‹ç»“æœ
  - [ ] æœç´¢ç»“æœè´¨é‡
  - [ ] TPSTæ•°æ®
- [ ] å¯¹æ¯”ä½¿ç”¨åŸç”Ÿæœç´¢çš„å·®å¼‚

**è®°å½•ä½ç½®**: `docs/knowledge/dogfooding/safe-search-case-study.md`

---

### ä»»åŠ¡4.2: ä½¿ç”¨safe_edité‡æ„ä»£ç  (1äººå¤©)
- [ ] é€‰æ‹©ä¸€ä¸ªéœ€è¦é‡æ„çš„æ¨¡å—
- [ ] ä½¿ç”¨safe_editè¿›è¡Œä¿®æ”¹
- [ ] è®°å½•ç¼–è¾‘å‡†ç¡®æ€§å’Œrollbackæƒ…å†µ
- [ ] æµ‹è¯•ä¿®æ”¹ç»“æœ
- [ ] è®°å½•TPSTæ•°æ®

**è®°å½•ä½ç½®**: `docs/knowledge/dogfooding/safe-edit-case-study.md`

---

### ä»»åŠ¡4.3: æ”¶é›†æ”¹è¿›å»ºè®® (4å°æ—¶)
- [ ] æ•´ç†dogfoodingè¿‡ç¨‹ä¸­çš„é—®é¢˜
- [ ] æå‡ºæ”¹è¿›æ–¹å‘ï¼ˆPhase 3/4/5éœ€è¦çš„åŠŸèƒ½ï¼‰
- [ ] è¯„ä¼°å½“å‰åŠŸèƒ½æ˜¯å¦è¾¾åˆ°MVPæ ‡å‡†
- [ ] å†³ç­–ï¼šç»§ç»­Phase 3 or pivot

**äº¤ä»˜ç‰©**: `docs/knowledge/dogfooding/improvement-recommendations.md`

---

## ğŸ“ Phase 5: æ–‡æ¡£å’Œæ€»ç»“ (1äººå¤©)

### ä»»åŠ¡5.1: æ›´æ–°é¡¹ç›®æ–‡æ¡£ (4å°æ—¶)
- [ ] æ›´æ–°README.mdï¼ˆæ·»åŠ åŠŸèƒ½æ¼”ç¤ºï¼‰
- [ ] æ›´æ–°Epic-001 READMEï¼ˆæ ‡è®°Phase 2å®Œæˆï¼‰
- [ ] åˆ›å»ºå¿«é€Ÿå¼€å§‹æŒ‡å—
- [ ] å½•åˆ¶5åˆ†é’Ÿæ¼”ç¤ºè§†é¢‘

---

### ä»»åŠ¡5.2: å†™æ€»ç»“æŠ¥å‘Š (4å°æ—¶)
- [ ] Phase 2å®ŒæˆæŠ¥å‘Š
  - [ ] å®Œæˆçš„åŠŸèƒ½
  - [ ] åŸºå‡†æµ‹è¯•ç»“æœ
  - [ ] Dogfoodingç»éªŒ
  - [ ] ä¸‹ä¸€æ­¥å»ºè®®
- [ ] æäº¤git commit
- [ ] æ›´æ–°BACKLOG.md

**äº¤ä»˜ç‰©**: `docs/development/sprints/current/phase-2-completion-report.md`

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†æ€»è§ˆ

### åŠŸèƒ½éªŒæ”¶
- [x] Phase 0å®Œæˆ âœ…
- [ ] Feature 2.1é€šè¿‡ç‡: 100% âœ…
- [ ] Feature 2.2é€šè¿‡ç‡: â‰¥ 95%
- [ ] Feature 2.3é€šè¿‡ç‡: 100% âœ…
- [ ] ä¸‰ä¸ªsafeå·¥å…·é€šè¿‡MCPæš´éœ²
- [ ] MCPé›†æˆæµ‹è¯• 100% é€šè¿‡

### è´¨é‡éªŒæ”¶
- [ ] ä»£ç æ ¼å¼åŒ–: 100% é€šè¿‡
- [ ] ç±»å‹æ£€æŸ¥: 0 é”™è¯¯
- [ ] Lintæ£€æŸ¥: 0 è­¦å‘Š
- [ ] æµ‹è¯•è¦†ç›–ç‡: â‰¥ 85%

### æ•°æ®éªŒæ”¶
- [ ] åŸºå‡†æµ‹è¯•: â‰¥ 10ä¸ªåœºæ™¯
- [ ] TPSTæ”¹è¿›: â‰¥ 30%
- [ ] Dogfoodingæ¡ˆä¾‹: â‰¥ 2ä¸ª

### æ–‡æ¡£éªŒæ”¶
- [ ] æ‰€æœ‰ä»»åŠ¡æœ‰äº¤ä»˜ç‰©
- [ ] Epic-001 READMEæ›´æ–°
- [ ] æ¼”ç¤ºè§†é¢‘å½•åˆ¶
- [ ] æ€»ç»“æŠ¥å‘Šå®Œæˆ

---

## ğŸ“… æ—¶é—´è¡¨

### Week 1 (Day 1-5)
```
Day 1: ä»»åŠ¡1.1 + 1.2 (åˆ†æ+ä¿®å¤æ¥å£)
Day 2: ä»»åŠ¡1.3 (KISSé‡æ„)
Day 3: ä»»åŠ¡1.4 + 2.1 (å›å½’æµ‹è¯•+åˆ›å»ºæ¨¡å—)
Day 4: ä»»åŠ¡2.2 + 2.3 (å·¥å…·æ³¨å†Œ+é›†æˆæµ‹è¯•)
Day 5: ä»»åŠ¡3.1 (è®¾è®¡TPSTç³»ç»Ÿ)
```

### Week 2 (Day 6-10)
```
Day 6: ä»»åŠ¡3.2 (å®ç°åŸºå‡†æµ‹è¯•)
Day 7: ä»»åŠ¡3.3 (è¿è¡Œæµ‹è¯•+åˆ†æ)
Day 8: ä»»åŠ¡4.1 (safe_search dogfooding)
Day 9: ä»»åŠ¡4.2 + 4.3 (safe_edit + æ”¹è¿›å»ºè®®)
Day 10: ä»»åŠ¡5.1 + 5.2 (æ–‡æ¡£+æ€»ç»“)
```

---

## ğŸš¨ é£é™©ä¸åº”å¯¹

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|------|---------|
| Feature 2.2ä¿®å¤æ—¶é—´è¶…é¢„æœŸ | ä¸­ | é«˜ | æå‰1å¤©å¼€å§‹ï¼Œç•™ç¼“å†² |
| åŸºå‡†æµ‹è¯•è®¾è®¡å¤æ‚ | ä¸­ | ä¸­ | ç®€åŒ–åœºæ™¯ï¼ŒMVPå…ˆè¡Œ |
| Dogfoodingå‘ç°ä¸¥é‡é—®é¢˜ | ä½ | é«˜ | å¿«é€Ÿä¿®å¤æˆ–é™çº§åŠŸèƒ½ |
| MCPé›†æˆå…¼å®¹æ€§é—®é¢˜ | ä½ | ä¸­ | å‚è€ƒç°æœ‰å·¥å…·å®ç° |

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- âœ… ä¸‰ä¸ªsafeå·¥å…·å¯ç”¨
- âœ… TPSTé™ä½ â‰¥ 30%
- âœ… æµ‹è¯•é€šè¿‡ç‡ â‰¥ 95%

### äº§å“æŒ‡æ ‡
- âœ… å¯ä»¥dogfoodingä½¿ç”¨
- âœ… æœ‰æ•°æ®æ”¯æ’‘ä»·å€¼
- âœ… ä¸ºä¸‹ä¸€æ­¥å†³ç­–æä¾›ä¾æ®

### å­¦ä¹ æŒ‡æ ‡
- âœ… éªŒè¯æ ¸å¿ƒå‡è®¾ï¼ˆåŒºåŸŸæ£€æµ‹ï¼‰
- âœ… å‘ç°æ”¹è¿›æ–¹å‘
- âœ… ç§¯ç´¯å®æˆ˜ç»éªŒ

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Epic-001 README](docs/product/epics/epic-001-behavior-constraints/README.md)
- [Feature 2.2 TDD Lessons](docs/testing/standards/tdd-refactoring-guidelines.md)
- [Phase 2 é‡æ„åˆ†æ](docs/development/sprints/current/phase-2-tdd-refactor-analysis.md)
- [å•äººç°å®æ€§è¯„ä¼°](docs/product/roadmap/single-person-reality-check.md)

---

**æœ€åæ›´æ–°**: 2025-11-07
**è´Ÿè´£äºº**: EvolvAI Team
**çŠ¶æ€**: ğŸŸ¢ Ready to Execute