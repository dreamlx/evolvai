# EvolvAI å¼€å‘å·¥ä½œæµ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰ EvolvAI é¡¹ç›®çš„å¼€å‘å·¥ä½œæµï¼ŒåŒ…æ‹¬ GitFlow åˆ†æ”¯ç®¡ç†ã€TDD å¼€å‘æµç¨‹ã€Sprint ç®¡ç†å’Œè´¨é‡ä¿è¯ã€‚

---

## ğŸŒ¿ GitFlow åˆ†æ”¯ç­–ç•¥

### **åˆ†æ”¯ç»“æ„**
```
main (ç”Ÿäº§åˆ†æ”¯)
â”œâ”€â”€ develop (å¼€å‘åˆ†æ”¯)
â”‚   â”œâ”€â”€ feature/indexing-engine (åŠŸèƒ½åˆ†æ”¯)
â”‚   â”œâ”€â”€ feature/caching-system (åŠŸèƒ½åˆ†æ”¯)
â”‚   â”œâ”€â”€ feature/mcp-server (åŠŸèƒ½åˆ†æ”¯)
â”‚   â””â”€â”€ feature/cli-interface (åŠŸèƒ½åˆ†æ”¯)
â””â”€â”€ hotfix/critical-security-fix (ç´§æ€¥ä¿®å¤)
```

### **åˆ†æ”¯è§„åˆ™**
| åˆ†æ”¯ç±»å‹ | ç”¨é€” | åˆå¹¶è§„åˆ™ |
|----------|------|----------|
| main | ç”Ÿäº§å‘å¸ƒ | â† develop |
| develop | å¼€å‘é›†æˆ | â† feature |
| feature/* | åŠŸèƒ½å¼€å‘ | â†’ develop |
| hotfix/* | ç´§æ€¥ä¿®å¤ | â†’ main, develop |
| release/* | ç‰ˆæœ¬å‡†å¤‡ | â†’ main |

### **åˆ†æ”¯å‘½åè§„èŒƒ**
- `feature/[name]`: åŠŸèƒ½å¼€å‘åˆ†æ”¯
- `hotfix/[name]`: ç´§æ€¥ä¿®å¤åˆ†æ”¯
- `release/[version]`: ç‰ˆæœ¬å‘å¸ƒåˆ†æ”¯

### **å·¥ä½œæµç¨‹**
1. **åŠŸèƒ½å¼€å‘**ï¼šdevelop â†’ feature/* â†’ develop
2. **ç‰ˆæœ¬å‘å¸ƒ**ï¼šdevelop â†’ release/* â†’ main
3. **ç´§æ€¥ä¿®å¤**ï¼šmain â†’ hotfix/* â†’ main, develop

---

## ğŸ§ª TDD å¼€å‘æµç¨‹

### **çº¢ç»¿é‡æ„å¾ªç¯**
```
ğŸ”´ Red: ç¼–å†™å¤±è´¥çš„æµ‹è¯•
    â””â”€> Write Test First
        â”‚
ğŸŸ¢ Green: å®ç°æœ€å°åŠŸèƒ½
    â””â”€> Make Test Pass
        â”‚
ğŸ”„ Refactor: é‡æ„å’Œä¼˜åŒ–
    â””â”€> Improve Code
```

### **å¼€å‘æ­¥éª¤**
1. **éœ€æ±‚åˆ†æ** â†’ User Story æ¸…æ™°å®šä¹‰
2. **æµ‹è¯•å…ˆè¡Œ** â†’ ç¼–å†™å®Œæ•´æµ‹è¯•ç”¨ä¾‹
3. **æœ€å°å®ç°** â†’ è®©æµ‹è¯•é€šè¿‡çš„æœ€ç®€å•å®ç°
4. **åŠŸèƒ½å®Œå–„** â†’ æ·»åŠ è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†
5. **ä»£ç é‡æ„** â†’ æå‡ä»£ç è´¨é‡å’Œæ€§èƒ½
6. **ä»£ç å®¡æŸ¥** â†’ å›¢é˜Ÿä»£ç  review
7. **åˆå¹¶é›†æˆ** â†’ åˆå¹¶åˆ° develop åˆ†æ”¯

### **æµ‹è¯•ç­–ç•¥**
```python
# æµ‹è¯•åˆ†å±‚ç­–ç•¥
â”œâ”€â”€ å•å…ƒæµ‹è¯• (Unit Tests) - 90%+ è¦†ç›–ç‡
â”œâ”€â”€ é›†æˆæµ‹è¯• (Integration Tests) - API æ¥å£æµ‹è¯•
â”œâ”€â”€ ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests) - å®Œæ•´ç”¨æˆ·åœºæ™¯
â””â”€â”€ æ€§èƒ½æµ‹è¯• (Performance Tests) - åŸºå‡†å’Œå¯¹æ¯”æµ‹è¯•
```

---

## ğŸƒ Sprint ç®¡ç†

### **Sprint ç»“æ„**
```
Sprint Planning (å‘¨ä¸€)
â”œâ”€â”€ Story åˆ†è§£å’Œä»»åŠ¡ä¼°ç®—
â”œâ”€â”€ Sprint ç›®æ ‡ç¡®å®š
â””â”€â”€ å›¢é˜Ÿæ‰¿è¯º

Sprint Execution (å‘¨äºŒ-å‘¨å››)
â”œâ”€â”€ TDD å¼€å‘å¾ªç¯
â”œâ”€â”€ æ¯æ—¥ç«™ä¼š (Daily Standup)
â””â”€â”€ éšæ—¶é—®é¢˜è§£å†³

Sprint Review (å‘¨äº”)
â”œâ”€â”€ æ¼”ç¤ºå’ŒéªŒæ”¶
â”œâ”€â”€ ç”¨æˆ·åé¦ˆæ”¶é›†
â””â”€â”€ Sprint æ€»ç»“

Sprint Retrospective (å‘¨äº”ä¸‹åˆ)
â”œâ”€â”€ æ”¹è¿›ç‚¹è¯†åˆ«
â””â”€â”€ ä¸‹ä¸ª Sprint è§„åˆ’
```

### **Sprint è§’è‰²**
- **Product Owner**: ç¡®å®šä¼˜å…ˆçº§å’ŒéªŒæ”¶æ ‡å‡†
- **Development Team**: æŠ€æœ¯å®ç°å’Œä»£ç è´¨é‡ä¿è¯
- **stakeholders**: ç”¨æˆ·ä»£è¡¨å’Œåé¦ˆæä¾›è€…

### **Sprint æ ‡å‡†**
- **é•¿åº¦**: 1 å‘¨
- **å®¹é‡**: æ¯å›¢é˜Ÿ 2-4 Storyï¼Œ8-12 Task
- **ç›®æ ‡**: å¯å·¥ä½œçš„è½¯ä»¶å¢é‡

---

## ğŸ“š Story ç®¡ç†

### **User Story æ¨¡æ¿**
```markdown
## Story [ID]
- [åˆ†ç±»]: Epic/Feature Story
- [ä¼˜å…ˆçº§]: High/Medium/Low
- [ä¼°ç®—]: Story Points
- [Sprint]: Sprint [N]

### User Story
**As a** [ç”¨æˆ·è§’è‰²]
**I want** [åŠŸèƒ½æè¿°]
**So that** [ä»·å€¼å®ç°]

### Acceptance Criteria
- âœ… [æ˜ç¡®éªŒæ”¶æ ‡å‡†1]
- âœ… [æ˜ç¡®éªŒæ”¶æ ‡å‡†2]
- âœ… [æ˜ç¡®éªŒæ”¶æ ‡å‡†N]

### Technical Requirements
- [æŠ€æœ¯è¦æ±‚1]
- [æŠ€æœ¯è¦æ±‚2]
- [æŠ€æœ¯è¦æ±‚N]

### Definition of Done
- [ ] æ‰€æœ‰é€šè¿‡å®¡æŸ¥çš„æµ‹è¯•
- [ ] ä»£ç è¦†ç›–ç‡è¾¾æ ‡
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] æ€§èƒ½æŒ‡æ ‡æ»¡è¶³
- [ ] ä¸Šçº¿æ£€æŸ¥æ¸…å•å®Œæˆ
```

### **ä¼°ç®—æ ‡å‡†**
- Story Points: ç›¸å¯¹å¤æ‚åº¦ä¼°ç®—
- 1 Point = ç†æƒ³ç¯å¢ƒä¸‹ 1 å¤©çš„å·¥ä½œé‡
- è€ƒè™‘å¤æ‚åº¦ã€ä¸ç¡®å®šæ€§ã€é£é™©

---

## ğŸ” è´¨é‡ä¿è¯

### **ä»£ç è´¨é‡æ ‡å‡†**
```python
# è´¨é‡æ£€æŸ¥æ¸…å•
âœ… ç±»å‹æ£€æŸ¥ (mypy) é€šè¿‡
âœ… ä»£ç æ ¼å¼åŒ– (black/ruff) é€šè¿‡
âœ… é™æ€åˆ†æ (pylint) é€šè¿‡
âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
âœ… é›†æˆæµ‹è¯•é€šè¿‡ç‡ 100%
âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•é€šè¿‡
```

### **æäº¤ä»£ç è§„èŒƒ**
```bash
# Pre-commit é’©å­æ£€æŸ¥
pre-commit:
  - trailing whitespace fix
  - yaml format check
  - import sorting
  - Python lint and format
  - security scan

# æäº¤ä¿¡æ¯è§„èŒƒ
æ ¼å¼: <type>[scope]: <description>

ç±»å‹:
  feat: æ–°åŠŸèƒ½
  fix: ä¿®å¤bug
  docs: æ–‡æ¡£æ›´æ–°
  style: æ ¼å¼è°ƒæ•´
  refactor: é‡æ„
  test: æµ‹è¯•ç›¸å…³
  chore: æ„å»ºå·¥å…·/ä¾èµ–æ›´æ–°
```

---

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè®¾ç½®

### **æœ¬åœ°å¼€å‘ç¯å¢ƒ**
```bash
# åŸºç¡€ç¯å¢ƒ
Python >= 3.11
uv (Python åŒ…ç®¡ç†å™¨)
git (ç‰ˆæœ¬æ§åˆ¶)

# å¼€å‘ä¾èµ–
uv pip install -e ".[dev]"

# å¼€å‘å·¥å…·
uv run poe test      # è¿è¡Œæµ‹è¯•
uv run poe format    # æ ¼å¼åŒ–ä»£ç 
uv run poe type-check # ç±»å‹æ£€æŸ¥
uv run poe lint      # ä»£ç æ£€æŸ¥
```

### **IDE é…ç½®**
```bash
# VS Code æ¨è
â”œâ”€â”€ Python æ’ä»¶
â”œâ”€â”€ pre-commit é…ç½®
â”œâ”€â”€ Git é›†æˆ
â””â”€â”€ è¿œç¨‹å¼€å‘ç¯å¢ƒé…ç½®

# PyCharm æ¨è
â”œâ”€â”€ ç¯å¢ƒé…ç½®
â”œâ”€â”€ ä»£ç é£æ ¼æ¨¡æ¿
â””â”€â”€ æµ‹è¯•è¿è¡Œé…ç½®
```

### **è‡ªåŠ¨åŒ–å·¥å…·**
```yaml
# .github/workflows/
â”œâ”€â”€ ci.yml          # æŒç»­é›†æˆ
â”œâ”€â”€ release.yml      # ç‰ˆæœ¬å‘å¸ƒ
â”œâ”€â”€ security.yml     # å®‰å…¨æ‰«æ
â””â”€â”€ docs.yml        # æ–‡æ¡£æ›´æ–°

# pre-commit configuration
repos:
  - repo: local
    hooks:
      id: trailing-whitespace
      id: yamlfmt
      id: python-import-sorting
      id: black
      id: ruff
      id: mypy
```

---

## ğŸ“Š ç›‘æ§å’ŒæŠ¥å‘Š

### **æ€§èƒ½ç›‘æ§**
```python
# å…³é”®æŒ‡æ ‡
æŒ‡æ ‡ ç›‘æ§æ–¹å¼          ç›®æ ‡          è­¦æŠ¥é˜ˆå€¼
- ç´¢å¼•æ€§èƒ½ æ—¶é—´åºåˆ—     Grafana + Prometheus   P95 < 2min
- ç¼“å­˜å‘½ä¸­ç‡           Grafana + Prometheus   > 85%
- æœç´¢å»¶è¿Ÿåˆ†å¸ƒ           Grafana + Prometheus   P95 < 2s
- é”™è¯¯ç‡ç»Ÿè®¡             Grafana + Prometheus   < 0.1%
```

### **è´¨é‡æŠ¥å‘Š**
```bash
# æ¯å‘¨æŠ¥å‘Š
coverage html           # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pytest --cov-report    # æ€§èƒ½åˆ†ææŠ¥å‘Š
ruff check --report     # ä»£ç è´¨é‡æŠ¥å‘Š
mypy --html-report      # ç±»å‹æ£€æŸ¥æŠ¥å‘Š
```

### **Dashboard**
```python
# å®æ—¶çŠ¶æ€é¢æ¿
æ€§èƒ½æŒ‡æ ‡é¢æ¿           # æœç´¢æ€§èƒ½ã€ç¼“å­˜çŠ¶æ€
è´¨é‡æŒ‡æ ‡é¢æ¿           # æµ‹è¯•è¦†ç›–ç‡ã€ä»£ç è´¨é‡
é¡¹ç›®çŠ¶æ€é¢æ¿           # ç´¢å¼•è¿›åº¦ã€æ–‡ä»¶ç»Ÿè®¡
å›¢é˜Ÿæ´»åŠ¨é¢æ¿           # æäº¤é¢‘ç‡ã€Sprint çŠ¶æ€
```

---

## ğŸ”§ DevOps æµç¨‹

### **è‡ªåŠ¨åŒ–éƒ¨ç½²**
```yaml
# CI/CD Pipeline
Stages:
  1. Validate          # ä»£ç éªŒè¯
  2. Test              # æµ‹è¯•æ‰§è¡Œ
  3. Security          # å®‰å…¨æ‰«æ
  4. Build             # æ„å»ºæ‰“åŒ…
  5. Deploy           # éƒ¨ç½²æµ‹è¯•
  6. Release          # ç‰ˆæœ¬å‘å¸ƒ

Triggers:
  - Push to develop
  - Pull Request
  - Tag creation
  - Schedule nightly
```

### **ç‰ˆæœ¬ç®¡ç†**
```bash
# ç‰ˆæœ¬è§„èŒƒ
vMAJOR.MINOR.PATCH

# å‘å¸ƒæµç¨‹
develop â†’ release/vX.Y.Z â†’ main
```

---

## ğŸ“– æ²Ÿé€šæœºåˆ¶

### **å›¢é˜Ÿåä½œ**
- **ä»£ç å®¡æŸ¥**: æ‰€æœ‰ PR å¿…é¡»è‡³å°‘ 1 äººå®¡æŸ¥
- **çŸ¥è¯†åˆ†äº«**: æ¯å‘¨æŠ€æœ¯åˆ†äº«ä¼š
- **æ–‡æ¡£æ›´æ–°**: å®æ—¶æ›´æ–°å†³ç­–å’Œç»“æœ
- **ç”¨æˆ·åé¦ˆ**: å®šæœŸæ”¶é›†ç”¨æˆ·æ„è§

### **ç¤¾åŒºå»ºè®¾**
- **Issue ç®¡ç†**: åŠæ—¶å“åº”é—®é¢˜å’Œå»ºè®®
- **è´¡çŒ®æŒ‡å—**: æ¸…æ™°çš„è´¡çŒ®æµç¨‹
- **Roadmap é€æ˜**: å…¬å¼€å¼€å‘è®¡åˆ’
- **å‘å¸ƒè¯´æ˜**: è¯¦ç»†çš„ç‰ˆæœ¬è¯´æ˜

---

## ğŸ“‹ å·¥ä½œæµä¼˜åŒ–

### **æŒç»­æ”¹è¿›**
1. **Sprint Retrospective**: æ¯ä¸ª Sprint ç»“å°¾çš„æ”¹è¿›è®¨è®º
2. **æµç¨‹ä¼˜åŒ–**: åŸºäºå›¢é˜Ÿåé¦ˆè°ƒæ•´å·¥ä½œæµ
3. **å·¥å…·æ”¹è¿›**: è‡ªåŠ¨åŒ–é‡å¤æ€§å·¥ä½œ
4. **çŸ¥è¯†æ²‰æ·€**: æ–‡æ¡£åŒ–å’Œç»éªŒåˆ†äº«

### **åº¦é‡æŒ‡æ ‡**
1. **äº¤ä»˜æ•ˆç‡**: Story å®Œæˆç‡ã€å‘¨æœŸæ—¶é—´
2. **è´¨é‡æŒ‡æ ‡**: Bug ç‡ã€å›å½’ç‡ã€æ€§èƒ½è¡¨ç°
3. **å›¢é˜Ÿæ•ˆèƒ½**: ä»£ç è¦†ç›–ç‡ã€CI/CD æˆåŠŸç‡
4. **ç”¨æˆ·æ»¡æ„åº¦**: åŠŸèƒ½ä½¿ç”¨ç‡ã€åé¦ˆè¯„ä»·

---

## ğŸ”„ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### **ç«‹å³è¡ŒåŠ¨**
1. **é…ç½®å¼€å‘ç¯å¢ƒ**: è®¾ç½® GitFlow å’Œå·¥å…·é“¾
2. **åˆ›å»ºé¡¹ç›®éª¨æ¶**: åˆå§‹åŒ–ç›®å½•ç»“æ„å’Œé…ç½®
3. **ç¼–å†™ç¬¬ä¸€ä¸ª Story**: è¯¦ç»†åˆ†è§£ç¬¬ä¸€ä¸ª User Story

### **æœ¬å‘¨ç›®æ ‡**
1. **å®Œæˆç¬¬ä¸€ä¸ª Epic è®¡åˆ’**: è¯¦ç»†åˆ†è§£ Features å’Œ Stories
2. **å®æ–½ç¬¬ä¸€ä¸ª Sprint**: å»ºç«‹ TDD å¼€å‘å¾ªç¯
3. **éªŒè¯å·¥ä½œæµ**: ç¡®ä¿å·¥å…·é“¾æ­£å¸¸è¿è¡Œ

### **é•¿æœŸç›®æ ‡**
1. **å»ºç«‹æŒç»­æ”¹è¿›æ–‡åŒ–**
2. **å®ç°è‡ªåŠ¨åŒ–ç¨‹åº¦æœ€å¤§åŒ–**
3. **æ„å»ºé«˜è´¨é‡å¼€å‘å›¢é˜Ÿ**
4. **åˆ›å»ºå¯æŒç»­å‘å±•é¡¹ç›®**

---

*æ–‡æ¡£ç»´æŠ¤è€…*
*æ–‡æ¡£ç‰ˆæœ¬*: v1.0*
*æœ€åæ›´æ–°*: 2024-01-26*